<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/easyui.css"/>
    <link rel="stylesheet" href="../css/icon.css"/>
    <link rel="stylesheet" href="../css/color.css"/>
    <style>
        input {
            width: 10em;
        }
    </style>
</head>
<body>
<!--
    把HTML的table变为数据网格，只需要在table上加class="easyui-datagrid"
    url：AJAX调用的后台程序资源的URL地址
    title：网格的标题
    iconCls：网格的图标
    rownumbers：是否显示行号
    pagination：是否显示分页栏
    pageList：分页栏上每页条目数量的选择列表值数组
-->
<table id="tt" class="easyui-datagrid"
       url="list.do"
       title="带分页的数据网格" iconCls="icon-save"
       rownumbers="true" pagination="true"
       pageList="[1,3,5,10]"
       toolbar="#tb">
    <thead>
    <tr>
        <th field="id" width="50" data-options="checkbox:true">ID</th>
        <th field="name" width="300">课程名称</th>
        <th field="teacher" width="200">任课教师</th>
        <th field="teachTime" width="200">上课时间</th>
        <th field="credit" width="100">学分</th>
    </tr>
    </thead>
</table>
<div id="tb" style="padding:3px">
    <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="openSaveDialog()">添加新课程</a>
    <span>名称</span>
    <input id="cName" style="line-height:20px;border:1px solid #ccc">
    <span>学分</span>
    <input id="cCredit" style="line-height:20px;border:1px solid #ccc">
    <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">查询</a>
</div>

<div id="dd" hidden>
    <form id="save-form" method="POST">
        <div>
            <input class="easyui-textbox" id="save-name" data-options="iconCls:'icon-search'"/>
        </div>
        <div>
            <input class="easyui-textbox" id="save-teacher" data-options="iconCls:'icon-search'"/>
        </div>
        <div>
            <input class="easyui-textbox" id="save-teachTime" data-options="iconCls:'icon-search'"/>
        </div>
        <div>
            <input class="easyui-textbox" id="save-credit" data-options="iconCls:'icon-search'"/>
        </div>
    </form>
</div>
<div id="dd-buttons" hidden>
    <a href="#" class="easyui-linkbutton" iconCls="icon-ok" onclick="save()">保存</a>
    <a href="#" class="easyui-linkbutton" iconCls="icon-cancel" onclick="$('#dd').dialog('close')">取消</a>
</div>
<script src="../js/jquery-3.2.1.js"></script>
<script src="../js/jquery.easyui.min.js"></script>
<script src="../js/easyui-lang-zh_CN.js"></script>
<script>
    function doSearch() {
        $('#tt').datagrid('load', {
            name: $('#cName').val(),
            credit: $('#cCredit').val()
        });
    }

    function openSaveDialog() {
        $('#dd').dialog({
            title: "添加新课程",
            width: 200,
            height: 200,
            closed: false,
            cache: false,
            modal: true,
            buttons: "#dd-buttons"
        });
        $("#dd").dialog('open');
    }

    function save() {
        let course = {
            "name": $("#save-name").val(),
            "credit": $("#save-credit").val(),
            "teacher": $("#save-teacher").val(),
            "teachTime": $("#save-teachTime").val()
        };
        $.ajax({
            url:"save.do",
            type:"POST",
            data:JSON.stringify(course),
            dataType:"json",
            contentType:"application/json"
        }).then(function (message) {
            alert(message.message);
        },function (xhr) {
            alert(xhr.responseText);
        });
    }
</script>
</body>
</html>